<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Login & Signup - TiffinRush</title>
  {% load static %}
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
  
  <!-- Google Sign-In API -->
  <script src="https://accounts.google.com/gsi/client" async defer></script>
  <meta name="google-signin-client_id" content="YOUR_GOOGLE_CLIENT_ID.apps.googleusercontent.com">
  <style>
    * { 
      margin: 0; 
      padding: 0; 
      box-sizing: border-box; 
    }
    
    body { 
      font-family: 'Poppins', sans-serif; 
      background: linear-gradient(135deg, #fff5f2 0%, #ffe8df 25%, #f8f4e1 50%, #e8f5e8 75%, #f0f8f0 100%);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      /* allow vertical scrolling when content overflows */
      position: static;
      overflow-y: auto;
    }
    
    /* Professional Food Background Animation */
    .food-bg { 
      position: fixed; 
      top: 0; 
      left: 0; 
      width: 100%; 
      height: 100%; 
      pointer-events: none; 
      z-index: 0; 
      overflow: hidden;
    }
    
    .food-item { 
      position: absolute; 
      font-size: 45px; 
      opacity: 0.025; 
      animation: professionalFloat 18s ease-in-out infinite; 
      filter: blur(2px) grayscale(40%);
      color: #ff6b35;
      text-shadow: 0 0 25px rgba(255,107,53,0.08);
    }
    
    .food-item:nth-child(1) { top: 4%; left: 6%; animation-delay: 0s; transform: rotate(10deg); }
    .food-item:nth-child(2) { top: 12%; right: 8%; animation-delay: 2.5s; transform: rotate(-12deg); }
    .food-item:nth-child(3) { bottom: 22%; left: 12%; animation-delay: 5s; transform: rotate(22deg); }
    .food-item:nth-child(4) { bottom: 12%; right: 20%; animation-delay: 7.5s; transform: rotate(-15deg); }
    .food-item:nth-child(5) { top: 42%; left: 2%; animation-delay: 10s; transform: rotate(18deg); }
    .food-item:nth-child(6) { top: 52%; right: 3%; animation-delay: 12.5s; transform: rotate(-22deg); }
    .food-item:nth-child(7) { top: 72%; left: 38%; animation-delay: 15s; transform: rotate(12deg); }
    .food-item:nth-child(8) { top: 22%; left: 58%; animation-delay: 17.5s; transform: rotate(-18deg); }
    .food-item:nth-child(9) { bottom: 38%; right: 42%; animation-delay: 1.5s; transform: rotate(28deg); }
    .food-item:nth-child(10) { top: 82%; right: 58%; animation-delay: 4s; transform: rotate(-8deg); }
    .food-item:nth-child(11) { top: 28%; left: 20%; animation-delay: 6.5s; transform: rotate(16deg); }
    .food-item:nth-child(12) { bottom: 48%; right: 10%; animation-delay: 9s; transform: rotate(-20deg); }
    .food-item:nth-child(13) { top: 62%; left: 62%; animation-delay: 11.5s; transform: rotate(25deg); }
    .food-item:nth-child(14) { bottom: 28%; left: 42%; animation-delay: 14s; transform: rotate(-10deg); }
    .food-item:nth-child(15) { top: 8%; left: 32%; animation-delay: 16.5s; transform: rotate(20deg); }
    
    @keyframes professionalFloat {
      0%, 100% { 
        transform: translateY(0px) translateX(0px) rotate(var(--rotation, 0deg)); 
        opacity: 0.02; 
      }
      25% { 
        transform: translateY(-18px) translateX(-12px) rotate(calc(var(--rotation, 0deg) + 6deg)); 
        opacity: 0.035; 
      }
      50% { 
        transform: translateY(-30px) translateX(10px) rotate(calc(var(--rotation, 0deg) - 4deg)); 
        opacity: 0.03; 
      }
      75% { 
        transform: translateY(-15px) translateX(15px) rotate(calc(var(--rotation, 0deg) + 8deg)); 
        opacity: 0.04; 
      }
    }
    
    /* Professional Gradient Overlay */
    .food-bg::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: 
        radial-gradient(circle at 18% 28%, rgba(255,107,53,0.015) 0%, transparent 75%),
        radial-gradient(circle at 82% 72%, rgba(76,175,80,0.015) 0%, transparent 75%),
        radial-gradient(circle at 58% 18%, rgba(255,193,7,0.015) 0%, transparent 75%),
        radial-gradient(circle at 28% 82%, rgba(255,107,53,0.01) 0%, transparent 65%),
        linear-gradient(45deg, rgba(255,255,255,0.015) 0%, transparent 100%);
      animation: gradientShift 25s ease-in-out infinite;
    }
    
    @keyframes gradientShift {
      0%, 100% { transform: scale(1) rotate(0deg); opacity: 0.3; }
      50% { transform: scale(1.02) rotate(0.3deg); opacity: 0.5; }
    }
    
    /* Professional Authentication Container */
    .auth-container { 
      background: rgba(255, 255, 255, 0.98);
      backdrop-filter: blur(30px) saturate(200%);
      border-radius: 32px;
      border: 1px solid rgba(255,255,255,0.95);
      padding: 50px 45px;
      width: 100%;
      max-width: 480px;
      box-shadow: 
        0 30px 100px rgba(0, 0, 0, 0.04),
        0 15px 35px rgba(255,107,53,0.03),
        inset 0 1px 0 rgba(255,255,255,0.98),
        0 0 0 1px rgba(255,107,53,0.015);
      /* make the container participate in normal document flow so page can scroll */
      position: static;
      z-index: 1;
      animation: professionalSlideUp 1.2s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    @keyframes professionalSlideUp {
      from { 
        transform: translateY(80px) scale(0.92); 
        opacity: 0; 
      }
      to { 
        transform: translateY(0) scale(1); 
        opacity: 1; 
      }
    }
    
    /* Professional Header */
    .auth-header { 
      text-align: center; 
      margin-bottom: 45px; 
    }
    
    .brand-logo { 
      font-size: 58px; 
      margin-bottom: 20px; 
      background: linear-gradient(135deg, #ff6b35, #4caf50);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      display: block;
      animation: brandFloat 5s ease-in-out infinite;
      text-shadow: 0 3px 15px rgba(255,107,53,0.08);
    }
    
    @keyframes brandFloat {
      0%, 100% { transform: translateY(0px) scale(1); }
      50% { transform: translateY(-10px) scale(1.03); }
    }
    
    .brand-title { 
      font-size: 34px; 
      font-weight: 800; 
      background: linear-gradient(135deg, #ff6b35, #4caf50);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      margin-bottom: 12px; 
      letter-spacing: -1px;
      text-shadow: 0 3px 20px rgba(255,107,53,0.08);
    }
    
    .brand-subtitle { 
      color: #666; 
      font-size: 18px; 
      font-weight: 500; 
      opacity: 0.9;
      line-height: 1.5;
    }
    
    /* Professional Tab System */
    .tab-system { 
      display: flex; 
      background: linear-gradient(135deg, #f8f9fa, #ffffff); 
      border-radius: 26px; 
      padding: 10px; 
      margin-bottom: 45px; 
      box-shadow: 
        inset 0 3px 15px rgba(0,0,0,0.03),
        0 2px 8px rgba(0,0,0,0.015);
      border: 1px solid rgba(255,107,53,0.06);
    }
    
    .tab-button { 
      flex: 1; 
      padding: 18px 28px; 
      border: none; 
      background: transparent; 
      border-radius: 20px; 
      font-weight: 700; 
      font-size: 18px;
      cursor: pointer; 
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1); 
      color: #888;
      font-family: 'Poppins', sans-serif;
      position: relative;
      overflow: hidden;
    }
    
    .tab-button::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.5), transparent);
      transition: left 0.7s ease;
    }
    
    .tab-button:hover::before { left: 100%; }
    
    .tab-button.active { 
      background: linear-gradient(135deg, #ff6b35, #4caf50); 
      color: white; 
      box-shadow: 
        0 10px 30px rgba(255,107,53,0.2),
        inset 0 1px 0 rgba(255,255,255,0.25);
      transform: translateY(-3px);
    }
    
    .tab-button:hover:not(.active) {
      background: rgba(255,107,53,0.06);
      color: #ff6b35;
      transform: translateY(-2px);
    }
    
    /* Professional Form Elements */
    .form-section { margin-bottom: 32px; }
    
    .form-label { 
      display: block; 
      margin-bottom: 14px; 
      font-weight: 700; 
      color: #333; 
      font-size: 17px;
      letter-spacing: 0.1px;
    }
    
    .form-input { 
      width: 100%; 
      padding: 22px 26px; 
      border: 2.5px solid #f0f2f5; 
      border-radius: 22px; 
      font-size: 18px; 
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      background: #fafbfc;
      font-family: 'Poppins', sans-serif;
      font-weight: 500;
      color: #333;
      box-shadow: inset 0 2px 5px rgba(0,0,0,0.015);
    }
    
    .form-input:focus { 
      outline: none; 
      border-color: #ff6b35; 
      background: white;
      box-shadow: 
        0 0 0 5px rgba(255, 107, 53, 0.06),
        inset 0 2px 5px rgba(0,0,0,0.015),
        0 3px 12px rgba(255,107,53,0.04);
      transform: translateY(-3px);
    }
    
    .form-input::placeholder {
      color: #bbb;
      font-weight: 400;
    }
    
    /* Professional Phone Input */
    .phone-container { 
      display: flex; 
      gap: 18px; 
      align-items: stretch; 
    }
    
    .country-selector { 
      padding: 22px 20px; 
      border: 2.5px solid #f0f2f5; 
      border-radius: 22px; 
      background: #fafbfc;
      font-weight: 700;
      min-width: 95px;
      text-align: center;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #ff6b35;
      font-size: 18px;
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: inset 0 2px 5px rgba(0,0,0,0.015);
    }
    
    .country-selector:hover {
      border-color: #ff6b35;
      background: rgba(255,107,53,0.025);
      transform: translateY(-2px);
    }
    
    .phone-input { flex: 1; }
    
    /* Professional Action Button */
    .action-button { 
      width: 100%; 
      background: linear-gradient(135deg, #ff6b35 0%, #ffa726 50%, #4caf50 100%); 
      color: white; 
      border: none; 
      padding: 20px 32px; 
      border-radius: 32px; 
      font-size: 18px; 
      font-weight: 700; 
      cursor: pointer; 
      margin-bottom: 32px;
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      font-family: 'Poppins', sans-serif;
      letter-spacing: 0.1px;
      text-transform: none;
      position: relative;
      overflow: hidden;
      box-shadow: 
        0 8px 25px rgba(255,107,53,0.15),
        inset 0 1px 0 rgba(255,255,255,0.25);
    }
    
    .action-button::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      transition: left 0.7s ease;
    }
    
    .action-button:hover::before { left: 100%; }
    .action-button:hover { 
      transform: translateY(-4px); 
      box-shadow: 
        0 15px 45px rgba(255, 107, 53, 0.25),
        inset 0 1px 0 rgba(255,255,255,0.25);
    }
    
    .action-button:active { 
      transform: translateY(-2px); 
      box-shadow: 
        0 6px 20px rgba(255, 107, 53, 0.2),
        inset 0 1px 0 rgba(255,255,255,0.25);
    }
    
    /* Professional Divider */
    .section-divider { 
      text-align: center; 
      margin: 40px 0; 
      position: relative; 
      color: #999;
      font-weight: 600;
      font-size: 16px;
    }
    
    .section-divider::before { 
      content: ''; 
      position: absolute; 
      top: 50%; 
      left: 0; 
      right: 0; 
      height: 2.5px; 
      background: linear-gradient(90deg, transparent, #e5e5e5, transparent);
    }
    
    .section-divider span { 
      background: rgba(255, 255, 255, 0.98); 
      padding: 0 32px; 
      position: relative; 
    }
    
    /* Professional Social Authentication */
    .social-auth-button { 
      width: 100%; 
      display: flex; 
      align-items: center; 
      justify-content: center; 
      gap: 18px; 
      padding: 18px 28px; 
      border: 3px solid #f0f2f5; 
      border-radius: 32px; 
      background: rgba(255,255,255,0.98); 
      font-weight: 600; 
      font-size: 17px;
      cursor: pointer; 
      margin-bottom: 18px;
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      font-family: 'Poppins', sans-serif;
      position: relative;
      overflow: hidden;
      box-shadow: 
        0 4px 15px rgba(0,0,0,0.03),
        inset 0 1px 0 rgba(255,255,255,0.9);
    }
    
    .social-auth-button::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.5), transparent);
      transition: left 0.6s ease;
    }
    
    .social-auth-button:hover::before { left: 100%; }
    .social-auth-button:hover { 
      border-color: #ddd; 
      transform: translateY(-3px);
      box-shadow: 
        0 10px 30px rgba(0,0,0,0.06),
        inset 0 1px 0 rgba(255,255,255,0.9);
    }
    
    .google-auth { 
      color: #4285f4; 
      border-color: rgba(66,133,244,0.1);
    }
    .google-auth:hover { 
      border-color: rgba(66,133,244,0.2); 
      background: rgba(66,133,244,0.015);
    }
    
    .facebook-auth { 
      color: #1877f2; 
      border-color: rgba(24,119,242,0.1);
    }
    .facebook-auth:hover { 
      border-color: rgba(24,119,242,0.2); 
      background: rgba(24,119,242,0.015);
    }
    
    .email-auth {
      color: #34a853;
      border-color: rgba(52,168,83,0.1);
    }
    .email-auth:hover {
      border-color: rgba(52,168,83,0.2);
      background: rgba(52,168,83,0.015);
    }
    
    /* Professional Footer */
    .auth-footer { 
      text-align: center; 
      margin-top: 35px;
      padding-top: 30px;
      border-top: 1.5px solid rgba(0,0,0,0.04);
    }
    
    .footer-link { 
      color: #ff6b35; 
      text-decoration: none; 
      font-weight: 600; 
      transition: all 0.4s ease;
      font-size: 16px;
      margin: 0 10px;
    }
    
    .footer-link:hover {
      color: #4caf50;
      text-decoration: underline;
    }
    
    /* Professional OTP System */
    .otp-container { display: none; }
    .otp-grid { 
      display: grid; 
      grid-template-columns: repeat(6, 1fr);
      gap: 18px; 
      justify-content: center; 
      margin-bottom: 35px; 
    }
    
    .otp-digit { 
      width: 65px; 
      height: 65px; 
      text-align: center; 
      border: 3px solid #f0f2f5; 
      border-radius: 20px; 
      font-size: 28px; 
      font-weight: 800;
      color: #ff6b35;
      background: #fafbfc;
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      font-family: 'Poppins', sans-serif;
      box-shadow: inset 0 2px 5px rgba(0,0,0,0.015);
    }
    
    .otp-digit:focus { 
      border-color: #ff6b35; 
      background: white;
      box-shadow: 
        0 0 0 4px rgba(255,107,53,0.06),
        inset 0 2px 5px rgba(0,0,0,0.015);
      transform: scale(1.1);
    }
    
    .resend-info { 
      text-align: center; 
      color: #888; 
      font-size: 16px; 
      font-weight: 500;
      margin-top: 25px;
    }
    
    .resend-action { 
      color: #ff6b35; 
      cursor: pointer; 
      font-weight: 700; 
      transition: all 0.4s ease;
    }
    
    .resend-action:hover {
      color: #4caf50;
      text-decoration: underline;
    }
    
    /* Professional Loading States */
    .loading-spinner {
      display: inline-block;
      width: 22px;
      height: 22px;
      border: 2.5px solid rgba(255,255,255,0.25);
      border-radius: 50%;
      border-top-color: white;
      animation: spin 1.2s ease-in-out infinite;
      margin-right: 10px;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    /* Professional Responsive Design */
    @media (max-width: 550px) {
      .auth-container {
        padding: 40px 35px;
        margin: 18px;
        max-width: none;
      }
      
      .brand-title {
        font-size: 30px;
      }
      
      .brand-subtitle {
        font-size: 17px;
      }
      
      .form-input, .action-button {
        padding: 20px 24px;
      }
      
      .otp-digit {
        width: 55px;
        height: 55px;
        font-size: 24px;
      }
      
      .otp-grid {
        gap: 12px;
      }
    }
    
    /* Professional Hidden Elements */
    .hidden { 
      display: none !important; 
    }
    
    /* Professional Animations */
    .fade-in {
      animation: fadeIn 0.8s ease-out;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(25px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .shake {
      animation: shake 0.7s ease-in-out;
    }
    
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      10%, 30%, 50%, 70%, 90% { transform: translateX(-10px); }
      20%, 40%, 60%, 80% { transform: translateX(10px); }
    }
  </style>
</head>
<body>
  <!-- Professional Food Background -->
  <div class="food-bg">
    <div class="food-item">üçï</div>
    <div class="food-item">üçî</div>
    <div class="food-item">üçú</div>
    <div class="food-item">üåÆ</div>
    <div class="food-item">üç∞</div>
    <div class="food-item">ü•§</div>
    <div class="food-item">üçõ</div>
    <div class="food-item">ü•ó</div>
    <div class="food-item">üç¶</div>
    <div class="food-item">ü•Ñ</div>
    <div class="food-item">üç¥</div>
    <div class="food-item">ü•¢</div>
    <div class="food-item">üç≥</div>
    <div class="food-item">ü•ñ</div>
    <div class="food-item">üçù</div>
  </div>

  <!-- Professional Authentication Container -->
  <div class="auth-container">
    <!-- Professional Header -->
    <div class="auth-header">
      <div class="brand-logo">üçΩÔ∏è</div>
      <h1 class="brand-title">Welcome to TiffinRush</h1>
      <p class="brand-subtitle">Your favorite food, delivered fresh & fast with premium quality</p>
    </div>

    <!-- Professional Tab System -->
    <div class="tab-system">
      <button class="tab-button active" onclick="switchAuthTab('login')">
        <i class="fas fa-sign-in-alt"></i> Login
      </button>
      <button class="tab-button" onclick="switchAuthTab('signup')">
        <i class="fas fa-user-plus"></i> Sign Up
      </button>
    </div>

    <!-- Login Form -->
    <form id="loginForm" class="auth-form">
      <div class="form-section">
        <label class="form-label">
          <i class="fas fa-mobile-alt"></i> Mobile OTP Login
        </label>
        <div class="phone-container">
          <div class="country-selector">+91</div>
          <input type="tel" class="form-input phone-input" placeholder="Enter your phone number" required maxlength="10">
        </div>
      </div>
      
      <button type="submit" class="action-button">
        <i class="fas fa-paper-plane"></i> Send OTP
      </button>
      
      <div class="section-divider">
        <span>or continue with</span>
      </div>
      
      <button type="button" class="social-auth-button google-auth" onclick="initiateGoogleAuth()">
        <i class="fab fa-google"></i>
        <span>Continue with Google</span>
      </button>
      
      <button type="button" class="social-auth-button facebook-auth" onclick="initiateFacebookAuth()">
        <i class="fab fa-facebook-f"></i>
        <span>Continue with Facebook</span>
      </button>
      
      <div class="section-divider">
        <span>or use email</span>
      </div>
      
      <div class="form-section">
        <label class="form-label">
          <i class="fas fa-envelope"></i> Email Address
        </label>
        <input type="email" class="form-input" placeholder="Enter your email address" style="margin-bottom: 18px;">
        <input type="password" class="form-input" placeholder="Enter your password">
      </div>
      
      <button type="button" class="action-button email-auth" onclick="initiateEmailLogin()">
        <i class="fas fa-envelope-open"></i> Login with Email
      </button>
    </form>

    <!-- Signup Form -->
    <form id="signupForm" class="auth-form hidden">
      <div class="form-section">
        <label class="form-label">
          <i class="fas fa-user"></i> Full Name
        </label>
        <input type="text" class="form-input" placeholder="Enter your full name" required>
      </div>
      
      <div class="form-section">
        <label class="form-label">
          <i class="fas fa-envelope"></i> Email Address
        </label>
        <input type="email" class="form-input" placeholder="Enter your email address" required>
      </div>
      
      <div class="form-section">
        <label class="form-label">
          <i class="fas fa-mobile-alt"></i> Phone Number
        </label>
        <div class="phone-container">
          <div class="country-selector">+91</div>
          <input type="tel" class="form-input phone-input" placeholder="Enter your phone number" required maxlength="10">
        </div>
      </div>
      
      <div class="form-section">
        <label class="form-label">
          <i class="fas fa-lock"></i> Create Password
        </label>
        <input type="password" class="form-input" placeholder="Create a strong password" required style="margin-bottom: 18px;">
        <input type="password" class="form-input" placeholder="Confirm your password" required>
      </div>
      
      <button type="submit" class="action-button">
        <i class="fas fa-user-check"></i> Create Account
      </button>
      
      <div class="section-divider">
        <span>or sign up with</span>
      </div>
      
      <button type="button" class="social-auth-button google-auth" onclick="initiateGoogleAuth()">
        <i class="fab fa-google"></i>
        <span>Sign up with Google</span>
      </button>
      
      <button type="button" class="social-auth-button facebook-auth" onclick="initiateFacebookAuth()">
        <i class="fab fa-facebook-f"></i>
        <span>Sign up with Facebook</span>
      </button>
    </form>

    <!-- Professional OTP Verification -->
    <div id="otpContainer" class="otp-container">
      <div class="form-section">
        <label class="form-label">
          <i class="fas fa-shield-alt"></i> Enter Verification Code
        </label>
        <p style="color: #888; font-size: 16px; margin-bottom: 30px; text-align: center; font-weight: 500;">
          We've sent a 6-digit verification code to your phone number
        </p>
        <div class="otp-grid">
          <input type="text" class="otp-digit" maxlength="1" oninput="handleOTPInput(this, 0)" onkeydown="handleOTPBackspace(event, 0)">
          <input type="text" class="otp-digit" maxlength="1" oninput="handleOTPInput(this, 1)" onkeydown="handleOTPBackspace(event, 1)">
          <input type="text" class="otp-digit" maxlength="1" oninput="handleOTPInput(this, 2)" onkeydown="handleOTPBackspace(event, 2)">
          <input type="text" class="otp-digit" maxlength="1" oninput="handleOTPInput(this, 3)" onkeydown="handleOTPBackspace(event, 3)">
          <input type="text" class="otp-digit" maxlength="1" oninput="handleOTPInput(this, 4)" onkeydown="handleOTPBackspace(event, 4)">
          <input type="text" class="otp-digit" maxlength="1" oninput="handleOTPInput(this, 5)" onkeydown="handleOTPBackspace(event, 5)">
        </div>
      </div>
      
      <button type="button" class="action-button" onclick="processOTPVerification()">
        <i class="fas fa-check-circle"></i> Verify & Continue
      </button>
      
      <div class="resend-info">
        Didn't receive the code? <span class="resend-action" onclick="resendOTPCode()">Resend OTP</span>
      </div>
    </div>

    <!-- Professional Footer -->
    <div class="auth-footer">
      <a href="#" class="footer-link">Terms of Service</a> ‚Ä¢ 
      <a href="#" class="footer-link">Privacy Policy</a> ‚Ä¢ 
      <a href="#" class="footer-link">Help Center</a>
    </div>
  </div>

  <script>
    // Professional Toast Notification System
    function displayToast(message, type = 'success', duration = 4500) {
      const toast = document.createElement('div');
      const icon = type === 'success' ? 'fas fa-check-circle' : 'fas fa-exclamation-triangle';
      
      toast.innerHTML = `
        <i class="${icon}"></i>
        <span>${message}</span>
      `;
      
      toast.style.cssText = `
        position: fixed; top: 30px; right: 30px; z-index: 15000;
        background: ${type === 'success' ? 'linear-gradient(135deg, #4caf50, #8bc34a)' : 'linear-gradient(135deg, #ff4757, #ff6b7d)'};
        color: white; padding: 20px 30px; border-radius: 32px;
        font-weight: 600; font-size: 16px; font-family: 'Poppins', sans-serif;
        transform: translateX(130%); transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: 0 15px 50px ${type === 'success' ? 'rgba(76,175,80,0.2)' : 'rgba(255,71,87,0.2)'};
        max-width: 380px; word-wrap: break-word; display: flex; align-items: center; gap: 15px;
        backdrop-filter: blur(15px);
      `;
      
      document.body.appendChild(toast);
      
      setTimeout(() => toast.style.transform = 'translateX(0)', 150);
      setTimeout(() => {
        toast.style.transform = 'translateX(130%)';
        setTimeout(() => document.body.removeChild(toast), 600);
      }, duration);
    }

    // Professional Tab Switching System
    function switchAuthTab(tab) {
      // Update tab buttons with professional animation
      document.querySelectorAll('.tab-button').forEach(btn => {
        btn.classList.remove('active');
        btn.style.transform = 'scale(0.94)';
        setTimeout(() => btn.style.transform = 'scale(1)', 200);
      });
      event.target.classList.add('active');
      
      // Professional form transitions
      const loginForm = document.getElementById('loginForm');
      const signupForm = document.getElementById('signupForm');
      const otpContainer = document.getElementById('otpContainer');
      
      [loginForm, signupForm, otpContainer].forEach(form => {
        form.style.opacity = '0';
        form.style.transform = 'translateY(30px)';
      });
      
      setTimeout(() => {
        loginForm.classList.toggle('hidden', tab !== 'login');
        signupForm.classList.toggle('hidden', tab !== 'signup');
        otpContainer.classList.add('hidden');
        
        const activeForm = tab === 'login' ? loginForm : signupForm;
        activeForm.style.opacity = '1';
        activeForm.style.transform = 'translateY(0)';
        activeForm.classList.add('fade-in');
      }, 300);
      
      // Update header content professionally
      const brandTitle = document.querySelector('.brand-title');
      const brandSubtitle = document.querySelector('.brand-subtitle');
      
      if (tab === 'signup') {
        brandTitle.textContent = 'Join TiffinRush Today';
        brandSubtitle.textContent = 'Create your account and start your premium food journey';
      } else {
        brandTitle.textContent = 'Welcome to TiffinRush';
        brandSubtitle.textContent = 'Your favorite food, delivered fresh & fast with premium quality';
      }
    }
    
    // Professional Google Authentication - Real Implementation
    let googleAuthInitialized = false;
    
    // Initialize Google Sign-In
    function initializeGoogleSignIn() {
      if (googleAuthInitialized) return;
      
      try {
        window.google.accounts.id.initialize({
          client_id: "YOUR_GOOGLE_CLIENT_ID.apps.googleusercontent.com", // Replace with your actual client ID
          callback: handleGoogleSignIn,
          auto_select: false,
          cancel_on_tap_outside: false
        });
        googleAuthInitialized = true;
        console.log('Google Sign-In initialized successfully');
      } catch (error) {
        console.error('Google Sign-In initialization failed:', error);
        displayToast('‚ùå Google authentication setup failed', 'error');
      }
    }
    
    // Handle Google Sign-In Response
    function handleGoogleSignIn(response) {
      try {
        const credential = response.credential;
        const payload = JSON.parse(atob(credential.split('.')[1])); // Decode JWT payload
        
        displayToast('üéâ Google authentication successful!', 'success');
        
        // Extract user information
        const userInfo = {
          googleId: payload.sub,
          email: payload.email,
          name: payload.name,
          picture: payload.picture,
          emailVerified: payload.email_verified
        };
        
        console.log('Google User Info:', userInfo);
        
        // Send user data to your Django backend
        authenticateWithBackend(userInfo, 'google');
        
      } catch (error) {
        console.error('Google Sign-In error:', error);
        displayToast('‚ùå Google authentication failed', 'error');
      }
    }
    
    // Authenticate with Django Backend
    async function authenticateWithBackend(userInfo, provider) {
      try {
        displayToast('üîê Verifying with TiffinRush servers...', 'success');
        
        const response = await fetch('/auth/social-login/', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'X-CSRFToken': getCsrfToken(),
          },
          body: JSON.stringify({
            provider: provider,
            user_data: userInfo
          })
        });
        
        const data = await response.json();
        
        if (response.ok && data.success) {
          displayToast('‚úÖ Welcome to TiffinRush Premium!', 'success');
          setTimeout(() => {
            window.location.href = data.redirect_url || '/dashboard/';
          }, 2000);
        } else {
          throw new Error(data.message || 'Authentication failed');
        }
        
      } catch (error) {
        console.error('Backend authentication error:', error);
        displayToast('‚ùå Server authentication failed: ' + error.message, 'error');
      }
    }
    
    // Get CSRF Token for Django
    function getCsrfToken() {
      const cookieValue = document.cookie
        .split('; ')
        .find(row => row.startsWith('csrftoken='))
        ?.split('=')[1];
      return cookieValue || '';
    }

    // Hash password using Web Crypto (SHA-256) and return hex string
    async function hashPassword(password) {
      const enc = new TextEncoder();
      const data = enc.encode(password);
      const hashBuffer = await crypto.subtle.digest('SHA-256', data);
      const hashArray = Array.from(new Uint8Array(hashBuffer));
      return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
    }

    // Save user to localStorage under key 'tiffin_users' (object keyed by email)
    async function saveUserLocal({ name, email, phone, password }) {
      const users = JSON.parse(localStorage.getItem('tiffin_users') || '{}');
      if (users[email]) {
        throw new Error('Email already registered');
      }
      const passwordHash = await hashPassword(password);
      users[email] = {
        name,
        email,
        phone,
        passwordHash,
        createdAt: new Date().toISOString()
      };
      localStorage.setItem('tiffin_users', JSON.stringify(users));
      return users[email];
    }
    
    // Professional Google Authentication Trigger
    function initiateGoogleAuth() {
      const btn = event.target.closest('.social-auth-button');
      const originalContent = btn.innerHTML;
      
      // Show loading state
      btn.innerHTML = `<div class="loading-spinner"></div><span>Connecting with Google...</span>`;
      btn.disabled = true;
      btn.style.opacity = '0.8';
      
      displayToast('üîó Initiating Google Sign-In...', 'success');
      
      try {
        // Initialize Google Sign-In if not already done
        if (!googleAuthInitialized) {
          initializeGoogleSignIn();
        }
        
        // Trigger Google Sign-In popup
        window.google.accounts.id.prompt((notification) => {
          if (notification.isNotDisplayed() || notification.isSkippedMoment()) {
            // Fallback to renderButton approach
            renderGoogleSignInButton(btn);
          }
        });
        
        // Reset button after timeout
        setTimeout(() => {
          if (btn.disabled) {
            btn.innerHTML = originalContent;
            btn.disabled = false;
            btn.style.opacity = '1';
          }
        }, 10000);
        
      } catch (error) {
        console.error('Google Sign-In trigger error:', error);
        displayToast('‚ùå Google Sign-In failed to initialize', 'error');
        
        // Reset button
        btn.innerHTML = originalContent;
        btn.disabled = false;
        btn.style.opacity = '1';
      }
    }
    
    // Render Google Sign-In Button (Fallback)
    function renderGoogleSignInButton(triggerBtn) {
      try {
        // Create temporary container for Google button
        const tempContainer = document.createElement('div');
        tempContainer.id = 'temp-google-signin';
        tempContainer.style.position = 'absolute';
        tempContainer.style.left = '-9999px';
        document.body.appendChild(tempContainer);
        
        window.google.accounts.id.renderButton(tempContainer, {
          theme: 'outline',
          size: 'large',
          width: 350,
          click_listener: () => {
            displayToast('üîó Google Sign-In popup opened...', 'success');
          }
        });
        
        // Trigger click on the Google button
        setTimeout(() => {
          const googleBtn = tempContainer.querySelector('div[role="button"]');
          if (googleBtn) {
            googleBtn.click();
          }
          document.body.removeChild(tempContainer);
        }, 100);
        
      } catch (error) {
        console.error('Google button render error:', error);
        displayToast('‚ùå Unable to render Google Sign-In', 'error');
      }
    }
    
    function initiateFacebookAuth() {
      const btn = event.target;
      const originalContent = btn.innerHTML;
      
      btn.innerHTML = `<div class="loading-spinner"></div><span>Connecting with Facebook...</span>`;
      btn.disabled = true;
      btn.style.opacity = '0.8';
      
      displayToast('üîó Connecting with Facebook...', 'success');
      
      setTimeout(() => {
        displayToast('üéâ Facebook authentication successful! Welcome to TiffinRush Premium!', 'success');
        setTimeout(() => {
          window.location.href = '/';
        }, 2200);
      }, 3000);
      
      setTimeout(() => {
        btn.innerHTML = originalContent;
        btn.disabled = false;
        btn.style.opacity = '1';
      }, 5500);
    }
    
    // Professional Email Authentication
    function initiateEmailLogin() {
      const emailInput = document.querySelector('input[type="email"]');
      const passwordInput = document.querySelector('input[type="password"]');
      
      if (!emailInput.value || !passwordInput.value) {
        displayToast('‚ùå Please enter both email and password', 'error');
        return;
      }
      
      if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(emailInput.value)) {
        displayToast('‚ùå Please enter a valid email address', 'error');
        emailInput.classList.add('shake');
        setTimeout(() => emailInput.classList.remove('shake'), 700);
        return;
      }
      
      displayToast('üîê Authenticating with email...', 'success');
      
      setTimeout(() => {
        displayToast('‚úÖ Email login successful! Welcome to TiffinRush Premium!', 'success');
        setTimeout(() => {
          window.location.href = '/';
        }, 2200);
      }, 3000);
    }
    
    // Professional Form Submission Handlers
    document.getElementById('loginForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const phoneInput = this.querySelector('.phone-input');
      const phoneNumber = phoneInput.value.trim();
      
      if (!/^[6-9]\d{9}$/.test(phoneNumber)) {
        displayToast('‚ùå Please enter a valid 10-digit phone number', 'error');
        phoneInput.focus();
        phoneInput.style.borderColor = '#ff4757';
        phoneInput.classList.add('shake');
        setTimeout(() => {
          phoneInput.classList.remove('shake');
          phoneInput.style.borderColor = '#f0f2f5';
        }, 700);
        return;
      }
      
      displayToast('üì± Sending OTP to +91 ' + phoneNumber, 'success');
      setTimeout(() => {
        displayOTPSection();
        displayToast('üì± OTP sent successfully!', 'success');
      }, 3000);
    });
    
    document.getElementById('signupForm').addEventListener('submit', async function(e) {
      e.preventDefault();
      const name = this.querySelector('input[type="text"]').value.trim();
      const email = this.querySelector('input[type="email"]').value.trim();
      const phone = this.querySelector('.phone-input').value.trim();
      const passwords = this.querySelectorAll('input[type="password"]');
      const password = passwords[0].value;
      const confirmPassword = passwords[1].value;
      
      // Professional validation with specific error messages
      if (name.length < 2) {
        displayToast('‚ùå Please enter your full name (minimum 2 characters)', 'error');
        return;
      }
      
      if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
        displayToast('‚ùå Please enter a valid email address', 'error');
        return;
      }
      
      if (!/^[6-9]\d{9}$/.test(phone)) {
        displayToast('‚ùå Please enter a valid 10-digit phone number', 'error');
        return;
      }
      
      if (password.length < 8) {
        displayToast('‚ùå Password must be at least 8 characters long', 'error');
        return;
      }
      
      if (password !== confirmPassword) {
        displayToast('‚ùå Passwords do not match', 'error');
        passwords[1].classList.add('shake');
        setTimeout(() => passwords[1].classList.remove('shake'), 700);
        return;
      }
      
      displayToast('üöÄ Creating your premium TiffinRush account...', 'success');
      try {
        await saveUserLocal({ name, email, phone, password });
        displayToast('üéâ Account created successfully! Redirecting to login...', 'success');
        // switch to login tab and prefill email, then redirect to /login for a canonical login page
        setTimeout(() => {
          try { switchAuthTab('login'); } catch (e) {}
          const loginEmail = document.querySelector('#loginForm input[type="email"]');
          if (loginEmail) loginEmail.value = email;
          // navigate to /login (harmless if already there)
          window.location.href = '/login';
        }, 900);
      } catch (err) {
        displayToast('‚ùå ' + (err.message || 'Unable to create account'), 'error');
      }
    });
    
    // Professional OTP System
    function displayOTPSection() {
      const forms = document.querySelectorAll('.auth-form');
      const otpContainer = document.getElementById('otpContainer');
      
      forms.forEach(form => {
        form.style.opacity = '0';
        form.style.transform = 'translateY(-30px)';
        setTimeout(() => form.classList.add('hidden'), 350);
      });
      
      setTimeout(() => {
        otpContainer.classList.remove('hidden');
        otpContainer.style.opacity = '0';
        otpContainer.style.transform = 'translateY(30px)';
        
        setTimeout(() => {
          otpContainer.style.opacity = '1';
          otpContainer.style.transform = 'translateY(0)';
          otpContainer.classList.add('fade-in');
          document.querySelector('.otp-digit').focus();
        }, 150);
      }, 350);
    }
    
    // Professional OTP Input Handling
    function handleOTPInput(current, index) {
      current.value = current.value.replace(/[^0-9]/g, '');
      
      if (current.value.length === 1 && index < 5) {
        document.querySelectorAll('.otp-digit')[index + 1].focus();
      }
      
      // Auto-verify when all digits are entered
      const otpDigits = document.querySelectorAll('.otp-digit');
      const otp = Array.from(otpDigits).map(input => input.value).join('');
      if (otp.length === 6) {
        setTimeout(processOTPVerification, 500);
      }
      
      // Professional visual feedback
      current.style.borderColor = current.value ? '#4caf50' : '#f0f2f5';
      current.style.backgroundColor = current.value ? '#f0f8f0' : '#fafbfc';
    }
    
    function handleOTPBackspace(event, index) {
      if (event.key === 'Backspace' && !event.target.value && index > 0) {
        document.querySelectorAll('.otp-digit')[index - 1].focus();
      }
    }
    
    // Professional OTP Verification
    function processOTPVerification() {
      const otpDigits = document.querySelectorAll('.otp-digit');
      const otp = Array.from(otpDigits).map(input => input.value).join('');
      
      if (otp.length === 6) {
        // Professional success feedback
        otpDigits.forEach(input => {
          input.style.borderColor = '#4caf50';
          input.style.backgroundColor = '#f0f8f0';
          input.style.color = '#4caf50';
          input.disabled = true;
        });
        
        displayToast('üîê Verifying your code...', 'success');
        
        setTimeout(() => {
          displayToast('üéâ Verification successful! Welcome to TiffinRush Premium!', 'success', 6000);
          setTimeout(() => {
            window.location.href = '/';
          }, 3000);
        }, 2500);
      } else {
        // Professional error feedback
        otpDigits.forEach(input => {
          input.style.borderColor = '#ff4757';
          input.style.backgroundColor = '#fef0f0';
          input.classList.add('shake');
        });
        
        displayToast('‚ùå Please enter all 6 digits of the verification code', 'error');
        
        setTimeout(() => {
          otpDigits.forEach(input => {
            input.classList.remove('shake');
            input.style.borderColor = '#f0f2f5';
            input.style.backgroundColor = '#fafbfc';
          });
        }, 700);
      }
    }
    
    // Professional OTP Resend System
    function resendOTPCode() {
      const resendAction = document.querySelector('.resend-action');
      const originalText = resendAction.textContent;
      let countdown = 30;
      
      resendAction.textContent = 'Sending...';
      resendAction.style.pointerEvents = 'none';
      resendAction.style.opacity = '0.6';
      
      setTimeout(() => {
        displayToast('üì± New verification code sent successfully!', 'success');
        
        const countdownInterval = setInterval(() => {
          resendAction.textContent = `Resend OTP (${countdown}s)`;
          countdown--;
          
          if (countdown < 0) {
            clearInterval(countdownInterval);
            resendAction.textContent = originalText;
            resendAction.style.pointerEvents = 'auto';
            resendAction.style.opacity = '1';
          }
        }, 1000);
      }, 2000);
    }
    
    // Professional Page Initialization
    document.addEventListener('DOMContentLoaded', function() {
      // Professional food animation initialization
      const foodItems = document.querySelectorAll('.food-item');
      foodItems.forEach((item, index) => {
        item.style.animationDelay = `${index * 1}s`;
      });
      
      // Initialize Google Sign-In when page loads
      setTimeout(() => {
        initializeGoogleSignIn();
      }, 1000);
      
      // Professional welcome message
      setTimeout(() => {
        displayToast('üçΩÔ∏è Welcome to TiffinRush Premium! Please login to continue.', 'success', 6000);
      }, 1500);
      
      // Professional input enhancements
      document.querySelectorAll('.form-input').forEach(input => {
        input.addEventListener('blur', function() {
          if (this.value) {
            this.style.transform = 'translateY(0)';
          }
        });
      });
    });
    
    // Initialize Google Sign-In when the Google API loads
    window.onGoogleLibraryLoad = function() {
      console.log('Google library loaded, initializing...');
      initializeGoogleSignIn();
    };
  </script>
</body>
</html>
