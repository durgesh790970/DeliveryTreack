<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TiffinRush - Home</title>
  {% load static %}
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { 
      font-family: 'Poppins', sans-serif; 
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
      min-height: 100vh; 
      overflow-x: hidden;
    }
    
    /* Header Section */
    .home-header { 
      background: linear-gradient(135deg, #ff6b35 0%, #f7931e 50%, #4caf50 100%); 
      padding: 20px; 
      border-radius: 0 0 30px 30px; 
      box-shadow: 0 8px 32px rgba(255,107,53,0.3); 
      position: relative; 
      overflow: hidden;
    }
    
    .home-header::before { 
      content: ''; 
      position: absolute; 
      top: -50%; 
      right: -20%; 
      width: 200px; 
      height: 200px; 
      background: rgba(255,255,255,0.1); 
      border-radius: 50%; 
      animation: float 6s ease-in-out infinite;
    }
    
    @keyframes float { 
      0%, 100% { transform: translateY(0px) rotate(0deg); } 
      50% { transform: translateY(-20px) rotate(180deg); } 
    }
    
    .header-top { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; position: relative; z-index: 2; }
    
    /* Logo */
    .home-logo { display: flex; align-items: center; gap: 10px; }
    .home-logo-icon { 
      width: 45px; 
      height: 45px; 
      background: white; 
      border-radius: 50%; 
      display: flex; 
      align-items: center; 
      justify-content: center; 
      font-size: 22px; 
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
    .home-logo-text { 
      font-size: 24px; 
      font-weight: 800; 
      color: white; 
      text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
    }
    
    /* Location & Profile */
    .header-right { display: flex; align-items: center; gap: 15px; }
    .location-info { text-align: right; }
    .location-label { font-size: 12px; color: rgba(255,255,255,0.8); font-weight: 500; }
    .location-text { font-size: 16px; color: white; font-weight: 600; }
    .profile-btn { 
      width: 45px; 
      height: 45px; 
      background: rgba(255,255,255,0.2); 
      border: 2px solid rgba(255,255,255,0.3); 
      border-radius: 50%; 
      display: flex; 
      align-items: center; 
      justify-content: center; 
      font-size: 20px; 
      color: white; 
      cursor: pointer; 
      transition: all 0.3s;
    }
    .profile-btn:hover { background: rgba(255,255,255,0.3); transform: scale(1.1); }
    
    /* Welcome Section */
    .welcome-section { position: relative; z-index: 2; }
    .welcome-text { font-size: 18px; color: white; font-weight: 500; margin-bottom: 5px; }
    .welcome-name { font-size: 28px; color: white; font-weight: 700; margin-bottom: 20px; }
    
    /* Search Bar */
    .search-container { position: relative; margin-bottom: 20px; }
    .search-bar { 
      width: 100%; 
      padding: 18px 25px 18px 55px; 
      border: none; 
      border-radius: 30px; 
      font-size: 16px; 
      background: white; 
      box-shadow: 0 8px 30px rgba(0,0,0,0.1); 
      transition: all 0.3s;
    }
    .search-bar:focus { 
      outline: none; 
      box-shadow: 0 12px 40px rgba(0,0,0,0.15); 
      transform: translateY(-2px);
    }
    .search-icon { 
      position: absolute; 
      left: 20px; 
      top: 50%; 
      transform: translateY(-50%); 
      font-size: 20px; 
      color: #ff6b35;
    }
    .voice-search-btn { 
      position: absolute; 
      right: 8px; 
      top: 50%; 
      transform: translateY(-50%); 
      width: 40px; 
      height: 40px; 
      background: linear-gradient(45deg, #ff6b35, #4caf50); 
      border: none; 
      border-radius: 50%; 
      color: white; 
      font-size: 16px; 
      cursor: pointer; 
      transition: all 0.3s;
    }
    .voice-search-btn:hover { transform: translateY(-50%) scale(1.1); }
    
    /* Quick Actions */
    .quick-actions { 
      display: flex; 
      justify-content: space-between; 
      gap: 15px; 
      position: relative; 
      z-index: 2;
    }
    .quick-action { 
      flex: 1; 
      background: rgba(255,255,255,0.2); 
      border: none; 
      border-radius: 20px; 
      padding: 12px 8px; 
      color: white; 
      font-weight: 600; 
      font-size: 12px; 
      cursor: pointer; 
      transition: all 0.3s; 
      text-align: center;
    }
    .quick-action:hover { background: rgba(255,255,255,0.3); transform: translateY(-3px); }
    .quick-action-icon { font-size: 20px; margin-bottom: 5px; }
    
    /* Main Content */
    .main-content { padding: 20px; }
    
    /* Food Categories */
    .categories-section { margin-bottom: 30px; }
    .section-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
    .section-title { font-size: 22px; font-weight: 700; color: white; }
    .view-all { color: #ff6b35; font-weight: 600; font-size: 14px; cursor: pointer; }
    
    .food-categories { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; }
    .category-card { 
      background: white; 
      border-radius: 20px; 
      padding: 20px 10px; 
      text-align: center; 
      box-shadow: 0 8px 30px rgba(0,0,0,0.1); 
      cursor: pointer; 
      transition: all 0.3s; 
      position: relative; 
      overflow: hidden;
    }
    .category-card::before { 
      content: ''; 
      position: absolute; 
      top: 0; 
      left: -100%; 
      width: 100%; 
      height: 100%; 
      background: linear-gradient(90deg, transparent, rgba(255,107,53,0.1), transparent); 
      transition: left 0.5s;
    }
    .category-card:hover::before { left: 100%; }
    .category-card:hover { transform: translateY(-8px); box-shadow: 0 15px 40px rgba(0,0,0,0.15); }
    .category-icon { 
      font-size: 40px; 
      margin-bottom: 10px; 
      transition: all 0.3s;
    }
    .category-card:hover .category-icon { transform: scale(1.2) rotate(10deg); }
    .category-name { font-size: 14px; font-weight: 600; color: #333; }
    
    /* Top Offers */
    .offers-section { margin-bottom: 30px; }
    .offers-carousel { display: flex; gap: 15px; overflow-x: auto; scrollbar-width: none; padding-bottom: 10px; }
    .offers-carousel::-webkit-scrollbar { display: none; }
    .offer-card { 
      min-width: 280px; 
      background: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%); 
      border-radius: 20px; 
      padding: 25px; 
      color: white; 
      position: relative; 
      overflow: hidden; 
      cursor: pointer; 
      transition: all 0.3s;
    }
    .offer-card:hover { transform: scale(1.05); box-shadow: 0 15px 40px rgba(255,107,53,0.4); }
    .offer-card::after { 
      content: ''; 
      position: absolute; 
      top: -50%; 
      right: -20%; 
      width: 100px; 
      height: 100px; 
      background: rgba(255,255,255,0.1); 
      border-radius: 50%; 
      animation: pulse 3s infinite;
    }
    @keyframes pulse { 
      0%, 100% { transform: scale(1); opacity: 0.5; } 
      50% { transform: scale(1.2); opacity: 0.8; } 
    }
    .offer-title { font-size: 18px; font-weight: 700; margin-bottom: 8px; position: relative; z-index: 2; }
    .offer-subtitle { font-size: 14px; opacity: 0.9; margin-bottom: 15px; position: relative; z-index: 2; }
    .offer-code { 
      background: rgba(255,255,255,0.2); 
      padding: 8px 15px; 
      border-radius: 20px; 
      font-size: 12px; 
      font-weight: 600; 
      display: inline-block; 
      position: relative; 
      z-index: 2;
    }
    
    /* Nearby Restaurants */
    .restaurants-section { margin-bottom: 100px; }
    .restaurant-grid { display: grid; gap: 20px; }
    .restaurant-card { 
      background: white; 
      border-radius: 20px; 
      overflow: hidden; 
      box-shadow: 0 8px 30px rgba(0,0,0,0.1); 
      transition: all 0.3s; 
      cursor: pointer;
    }
    .restaurant-card:hover { transform: translateY(-5px); box-shadow: 0 15px 40px rgba(0,0,0,0.15); }
    
    .restaurant-image { 
      width: 100%; 
      height: 150px; 
      background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%); 
      display: flex; 
      align-items: center; 
      justify-content: center; 
      font-size: 60px; 
      position: relative;
    }
    .restaurant-badge { 
      position: absolute; 
      top: 12px; 
      left: 12px; 
      background: linear-gradient(45deg, #4caf50, #8bc34a); 
      color: white; 
      padding: 6px 12px; 
      border-radius: 15px; 
      font-size: 10px; 
      font-weight: 600;
    }
    .favorite-btn { 
      position: absolute; 
      top: 12px; 
      right: 12px; 
      background: rgba(255,255,255,0.9); 
      border: none; 
      border-radius: 50%; 
      width: 35px; 
      height: 35px; 
      display: flex; 
      align-items: center; 
      justify-content: center; 
      font-size: 16px; 
      cursor: pointer; 
      transition: all 0.3s;
    }
    .favorite-btn:hover { background: #ff6b35; color: white; transform: scale(1.1); }
    
    .restaurant-info { padding: 20px; }
    .restaurant-name { font-size: 18px; font-weight: 700; color: #333; margin-bottom: 5px; }
    .restaurant-cuisine { color: #666; font-size: 14px; margin-bottom: 10px; }
    .restaurant-meta { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
    .rating-container { display: flex; align-items: center; gap: 5px; }
    .rating-badge { 
      background: #4caf50; 
      color: white; 
      padding: 4px 8px; 
      border-radius: 12px; 
      font-size: 12px; 
      font-weight: 600;
    }
    .delivery-info { color: #666; font-size: 12px; }
    .restaurant-offers { 
      background: #fff3cd; 
      color: #856404; 
      padding: 8px 12px; 
      border-radius: 15px; 
      font-size: 12px; 
      font-weight: 600; 
      margin-bottom: 15px;
    }
    .order-btn { 
      width: 100%; 
      background: linear-gradient(45deg, #ff6b35, #4caf50); 
      color: white; 
      border: none; 
      padding: 12px; 
      border-radius: 15px; 
      font-weight: 600; 
      cursor: pointer; 
      transition: all 0.3s;
    }
    .order-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(255,107,53,0.3); }
    
    /* Bottom Navigation */
    .bottom-nav { 
      position: fixed; 
      bottom: 0; 
      left: 0; 
      right: 0; 
      background: white; 
      padding: 12px 0 8px; 
      box-shadow: 0 -8px 30px rgba(0,0,0,0.1); 
      display: flex; 
      justify-content: space-around; 
      border-radius: 25px 25px 0 0; 
      z-index: 100;
    }
    .nav-item { 
      text-align: center; 
      color: #666; 
      text-decoration: none; 
      font-size: 12px; 
      font-weight: 500; 
      transition: all 0.3s; 
      padding: 5px;
    }
    .nav-item.active { color: #ff6b35; transform: scale(1.1); }
    .nav-icon { font-size: 24px; margin-bottom: 4px; }
    
    /* Floating Action Button */
    .fab { 
      position: fixed; 
      bottom: 80px; 
      right: 20px; 
      width: 60px; 
      height: 60px; 
      background: linear-gradient(45deg, #ff6b35, #4caf50); 
      border: none; 
      border-radius: 50%; 
      color: white; 
      font-size: 24px; 
      cursor: pointer; 
      box-shadow: 0 8px 30px rgba(255,107,53,0.4); 
      transition: all 0.3s; 
      z-index: 99;
    }
    .fab:hover { transform: scale(1.1) rotate(15deg); }
    
    /* Responsive Design */
    @media (max-width: 768px) { 
      .food-categories { grid-template-columns: repeat(3, 1fr); } 
      .offer-card { min-width: 250px; }
    }
    
    @media (max-width: 480px) { 
      .food-categories { grid-template-columns: repeat(2, 1fr); } 
      .header-top { flex-direction: column; gap: 15px; text-align: center; }
      .location-info { text-align: center; }
      .offer-card { min-width: 220px; }
    }
    
    /* Loading Animation */
    .loading-skeleton { 
      background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%); 
      background-size: 200% 100%; 
      animation: loading 1.5s infinite;
    }
    @keyframes loading { 
      0% { background-position: 200% 0; } 
      100% { background-position: -200% 0; } 
    }
  </style>
</head>
<body>
  <!-- Header Section -->
  <header class="home-header">
    <div class="header-top">
      <div class="home-logo">
        <div class="home-logo-icon">üçΩÔ∏è</div>
        <div class="home-logo-text">TiffinRush</div>
      </div>
      <div class="header-right">
        <div class="location-info">
          <div class="location-label">Deliver to</div>
          <div class="location-text">üìç Your Location</div>
        </div>
        <button class="profile-btn" onclick="window.location.href='/profile/'">üë§</button>
      </div>
    </div>
    
    <div class="welcome-section">
      <div class="welcome-text">Good Evening!</div>
      <div class="welcome-name">What's for dinner? üçΩÔ∏è</div>
    </div>
    
    <!-- Search Bar -->
    <div class="search-container">
      <div class="search-icon">üîç</div>
      <input type="text" class="search-bar" placeholder="Search for restaurants, food..." id="homeSearchBar">
      <button class="voice-search-btn" onclick="window.location.href='/voice-assistant/'" title="Voice Search">üé§</button>
    </div>
    
    <!-- Quick Actions -->
    <div class="quick-actions">
      <button class="quick-action" onclick="window.location.href='/menu/'">
        <div class="quick-action-icon">üçï</div>
        <div>Menu</div>
      </button>
      <button class="quick-action" onclick="window.location.href='/track/'">
        <div class="quick-action-icon">üöö</div>
        <div>Track Order</div>
      </button>
      <button class="quick-action" onclick="window.location.href='/cart/'">
        <div class="quick-action-icon">üõí</div>
        <div>Cart</div>
      </button>
      <button class="quick-action" onclick="window.location.href='/restaurants/'">
        <div class="quick-action-icon">‚≠ê</div>
        <div>Top Rated</div>
      </button>
    </div>
  </header>

  <!-- Main Content -->
  <main class="main-content">
    <!-- Food Categories -->
    <section class="categories-section">
      <div class="section-header">
        <h2 class="section-title">üçΩÔ∏è What's on your mind?</h2>
        <span class="view-all" onclick="window.location.href='/menu/'">View All</span>
      </div>
      <div class="food-categories">
        <div class="category-card" onclick="filterFood('pizza')">
          <div class="category-icon">üçï</div>
          <div class="category-name">Pizza</div>
        </div>
        <div class="category-card" onclick="filterFood('biryani')">
          <div class="category-icon">üçõ</div>
          <div class="category-name">Biryani</div>
        </div>
        <div class="category-card" onclick="filterFood('chinese')">
          <div class="category-icon">ü•°</div>
          <div class="category-name">Chinese</div>
        </div>
        <div class="category-card" onclick="filterFood('burger')">
          <div class="category-icon">üçî</div>
          <div class="category-name">Burger</div>
        </div>
        <div class="category-card" onclick="filterFood('dessert')">
          <div class="category-icon">üç∞</div>
          <div class="category-name">Dessert</div>
        </div>
        <div class="category-card" onclick="filterFood('drinks')">
          <div class="category-icon">ü•§</div>
          <div class="category-name">Drinks</div>
        </div>
        <div class="category-card" onclick="filterFood('indian')">
          <div class="category-icon">üçú</div>
          <div class="category-name">Indian</div>
        </div>
        <div class="category-card" onclick="filterFood('healthy')">
          <div class="category-icon">ü•ó</div>
          <div class="category-name">Healthy</div>
        </div>
      </div>
    </section>

    <!-- Top Offers -->
    <section class="offers-section">
      <div class="section-header">
        <h2 class="section-title">üî• Top Offers</h2>
        <span class="view-all">View All</span>
      </div>
      <div class="offers-carousel">
        <div class="offer-card" onclick="applyOffer('SAVE50')">
          <div class="offer-title">Flat ‚Çπ50 OFF</div>
          <div class="offer-subtitle">On orders above ‚Çπ299</div>
          <div class="offer-code">Code: SAVE50</div>
        </div>
        <div class="offer-card" onclick="applyOffer('FIRST100')">
          <div class="offer-title">‚Çπ100 OFF</div>
          <div class="offer-subtitle">First order special</div>
          <div class="offer-code">Code: FIRST100</div>
        </div>
        <div class="offer-card" onclick="applyOffer('FREEDELIVERY')">
          <div class="offer-title">Free Delivery</div>
          <div class="offer-subtitle">On all orders today</div>
          <div class="offer-code">No Code Needed</div>
        </div>
        <div class="offer-card" onclick="applyOffer('PARTY40')">
          <div class="offer-title">40% OFF</div>
          <div class="offer-subtitle">Party orders above ‚Çπ999</div>
          <div class="offer-code">Code: PARTY40</div>
        </div>
      </div>
    </section>

    <!-- Nearby Restaurants -->
    <section class="restaurants-section">
      <div class="section-header">
        <h2 class="section-title">üè™ Nearby Restaurants</h2>
        <span class="view-all" onclick="window.location.href='/restaurants/'">View All</span>
      </div>
      <div class="restaurant-grid">
        
        <!-- Restaurant 1 -->
        <div class="restaurant-card" onclick="window.location.href='/menu/'">
          <div class="restaurant-image">
            üçï
            <div class="restaurant-badge">30% OFF</div>
            <button class="favorite-btn" onclick="event.stopPropagation(); toggleFavorite(this)">ü§ç</button>
          </div>
          <div class="restaurant-info">
            <div class="restaurant-name">Domino's Pizza</div>
            <div class="restaurant-cuisine">Italian, Pizza, Fast Food</div>
            <div class="restaurant-meta">
              <div class="rating-container">
                <div class="rating-badge">‚≠ê 4.3</div>
                <span style="font-size: 12px; color: #666;">2.5k+ reviews</span>
              </div>
              <div class="delivery-info">üöö 25-30 min</div>
            </div>
            <div class="restaurant-offers">üí∞ Free delivery above ‚Çπ299</div>
            <button class="order-btn" onclick="event.stopPropagation(); window.location.href='/menu/'">Order Now</button>
          </div>
        </div>

        <!-- Restaurant 2 -->
        <div class="restaurant-card" onclick="window.location.href='/menu/'">
          <div class="restaurant-image">
            üçõ
            <div class="restaurant-badge">40% OFF</div>
            <button class="favorite-btn" onclick="event.stopPropagation(); toggleFavorite(this)">ü§ç</button>
          </div>
          <div class="restaurant-info">
            <div class="restaurant-name">Biryani Express</div>
            <div class="restaurant-cuisine">North Indian, Biryani, Mughlai</div>
            <div class="restaurant-meta">
              <div class="rating-container">
                <div class="rating-badge">‚≠ê 4.5</div>
                <span style="font-size: 12px; color: #666;">3.2k+ reviews</span>
              </div>
              <div class="delivery-info">üöö 35-40 min</div>
            </div>
            <div class="restaurant-offers">üéâ ‚Çπ100 OFF above ‚Çπ399</div>
            <button class="order-btn" onclick="event.stopPropagation(); window.location.href='/menu/'">Order Now</button>
          </div>
        </div>

        <!-- Restaurant 3 -->
        <div class="restaurant-card" onclick="window.location.href='/menu/'">
          <div class="restaurant-image">
            üçî
            <div class="restaurant-badge">Buy 1 Get 1</div>
            <button class="favorite-btn" onclick="event.stopPropagation(); toggleFavorite(this)">ü§ç</button>
          </div>
          <div class="restaurant-info">
            <div class="restaurant-name">Burger King</div>
            <div class="restaurant-cuisine">American, Burgers, Fast Food</div>
            <div class="restaurant-meta">
              <div class="rating-container">
                <div class="rating-badge">‚≠ê 4.2</div>
                <span style="font-size: 12px; color: #666;">4.1k+ reviews</span>
              </div>
              <div class="delivery-info">üöö 20-25 min</div>
            </div>
            <div class="restaurant-offers">üî• Free delivery + 50% OFF</div>
            <button class="order-btn" onclick="event.stopPropagation(); window.location.href='/menu/'">Order Now</button>
          </div>
        </div>

        <!-- Restaurant 4 -->
        <div class="restaurant-card" onclick="window.location.href='/menu/'">
          <div class="restaurant-image">
            ü•°
            <div class="restaurant-badge">25% OFF</div>
            <button class="favorite-btn" onclick="event.stopPropagation(); toggleFavorite(this)">ü§ç</button>
          </div>
          <div class="restaurant-info">
            <div class="restaurant-name">Wow! China</div>
            <div class="restaurant-cuisine">Chinese, Thai, Pan-Asian</div>
            <div class="restaurant-meta">
              <div class="rating-container">
                <div class="rating-badge">‚≠ê 4.1</div>
                <span style="font-size: 12px; color: #666;">1.8k+ reviews</span>
              </div>
              <div class="delivery-info">üöö 30-35 min</div>
            </div>
            <div class="restaurant-offers">üéÅ Buy 1 Get 1 on selected items</div>
            <button class="order-btn" onclick="event.stopPropagation(); window.location.href='/menu/'">Order Now</button>
          </div>
        </div>

      </div>
    </section>
  </main>

  <!-- Floating Action Button -->
  <button class="fab" onclick="window.location.href='/cart/'" title="View Cart">
    üõí
  </button>

  <!-- Bottom Navigation -->
  <nav class="bottom-nav">
    <a href="/" class="nav-item active">
      <div class="nav-icon">üè†</div>
      <div>Home</div>
    </a>
    <a href="/restaurants/" class="nav-item">
      <div class="nav-icon">üçΩÔ∏è</div>
      <div>Restaurants</div>
    </a>
    <a href="/menu/" class="nav-item">
      <div class="nav-icon">üìã</div>
      <div>Menu</div>
    </a>
    <a href="/track/" class="nav-item">
      <div class="nav-icon">üöö</div>
      <div>Track</div>
    </a>
    <a href="/profile/" class="nav-item">
      <div class="nav-icon">üë§</div>
      <div>Profile</div>
    </a>
  </nav>

  <script>
    // Initialize page
    document.addEventListener('DOMContentLoaded', function() {
      updateWelcomeMessage();
      loadUserLocation();
      loadFavoriteRestaurants();
    });

    // Update welcome message based on time
    function updateWelcomeMessage() {
      const hour = new Date().getHours();
      const welcomeElement = document.querySelector('.welcome-text');
      const nameElement = document.querySelector('.welcome-name');
      
      if (hour < 12) {
        welcomeElement.textContent = 'Good Morning!';
        nameElement.textContent = 'Ready for breakfast? ‚òÄÔ∏è';
      } else if (hour < 17) {
        welcomeElement.textContent = 'Good Afternoon!';
        nameElement.textContent = 'Lunch time cravings? üçΩÔ∏è';
      } else {
        welcomeElement.textContent = 'Good Evening!';
        nameElement.textContent = 'What\'s for dinner? üåô';
      }
    }

    // Load user location
    function loadUserLocation() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function(position) {
          // In a real app, you would reverse geocode this
          document.querySelector('.location-text').textContent = 'üìç Current Location';
        });
      }
    }

    // Search functionality
    document.getElementById('homeSearchBar').addEventListener('input', function(e) {
      const searchTerm = e.target.value.toLowerCase();
      if (searchTerm.length > 2) {
        // In a real app, you would make an API call here
        showToast(`Searching for "${searchTerm}"...`);
        setTimeout(() => {
          window.location.href = `/menu/?search=${encodeURIComponent(searchTerm)}`;
        }, 1000);
      }
    });

    // Filter food by category
    function filterFood(category) {
      showToast(`Showing ${category} options...`);
      setTimeout(() => {
        window.location.href = `/menu/?category=${category}`;
      }, 800);
    }

    // Apply offer
    function applyOffer(code) {
      showToast(`Offer ${code} copied! üéâ`);
      // Copy to clipboard
      navigator.clipboard.writeText(code).then(() => {
        setTimeout(() => {
          window.location.href = '/menu/';
        }, 1500);
      });
    }

    // Toggle favorite restaurant
    function toggleFavorite(btn) {
      if (btn.textContent === 'ü§ç') {
        btn.textContent = '‚ù§Ô∏è';
        btn.style.background = '#ff6b35';
        btn.style.color = 'white';
        showToast('Added to favorites! ‚ù§Ô∏è');
      } else {
        btn.textContent = 'ü§ç';
        btn.style.background = 'rgba(255,255,255,0.9)';
        btn.style.color = '#333';
        showToast('Removed from favorites');
      }
    }

    // Load favorite restaurants
    function loadFavoriteRestaurants() {
      const favorites = JSON.parse(localStorage.getItem('favorites') || '[]');
      document.querySelectorAll('.favorite-btn').forEach((btn, index) => {
        if (favorites.includes(index)) {
          btn.textContent = '‚ù§Ô∏è';
          btn.style.background = '#ff6b35';
          btn.style.color = 'white';
        }
      });
    }

    // Show toast notification
    function showToast(message) {
      const toast = document.createElement('div');
      toast.style.cssText = `
        position: fixed; top: 100px; right: 20px; z-index: 1000;
        background: linear-gradient(45deg, #4caf50, #8bc34a); color: white;
        padding: 15px 25px; border-radius: 25px; font-weight: 600;
        font-size: 14px; transform: translateX(100%); transition: all 0.3s;
        box-shadow: 0 8px 30px rgba(76,175,80,0.3);
      `;
      toast.textContent = message;
      document.body.appendChild(toast);
      
      setTimeout(() => toast.style.transform = 'translateX(0)', 100);
      setTimeout(() => toast.style.transform = 'translateX(100%)', 3000);
      setTimeout(() => document.body.removeChild(toast), 3500);
    }

    // Add smooth scrolling
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        document.querySelector(this.getAttribute('href')).scrollIntoView({
          behavior: 'smooth'
        });
      });
    });

    // Add loading animation for restaurant cards
    function showLoading() {
      document.querySelectorAll('.restaurant-card').forEach(card => {
        card.classList.add('loading-skeleton');
      });
      
      setTimeout(() => {
        document.querySelectorAll('.restaurant-card').forEach(card => {
          card.classList.remove('loading-skeleton');
        });
      }, 1500);
    }

    // Keyboard shortcuts
    document.addEventListener('keydown', function(e) {
      if (e.key === '/' && !e.target.matches('input')) {
        e.preventDefault();
        document.getElementById('homeSearchBar').focus();
      }
    });

    // Add entrance animations
    function addEntranceAnimations() {
      const elements = document.querySelectorAll('.category-card, .offer-card, .restaurant-card');
      elements.forEach((el, index) => {
        el.style.opacity = '0';
        el.style.transform = 'translateY(30px)';
        setTimeout(() => {
          el.style.transition = 'all 0.6s ease';
          el.style.opacity = '1';
          el.style.transform = 'translateY(0)';
        }, index * 100);
      });
    }

    // Initialize animations
    setTimeout(addEntranceAnimations, 500);

    // Pull to refresh functionality
    let startY = 0;
    let pullDistance = 0;
    const pullThreshold = 100;

    document.addEventListener('touchstart', function(e) {
      startY = e.touches[0].clientY;
    });

    document.addEventListener('touchmove', function(e) {
      if (window.scrollY === 0) {
        pullDistance = e.touches[0].clientY - startY;
        if (pullDistance > 0 && pullDistance < pullThreshold) {
          document.body.style.transform = `translateY(${pullDistance / 3}px)`;
        }
      }
    });

    document.addEventListener('touchend', function(e) {
      if (pullDistance > pullThreshold) {
        showToast('Refreshing content...');
        location.reload();
      }
      document.body.style.transform = '';
      pullDistance = 0;
    });
  </script>
</body>
</html>
